"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0";
exports.ids = ["vendor-chunks/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/core/PointMaterial.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/core/PointMaterial.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PointMaterial: () => (/* binding */ PointMaterial),\n/* harmony export */   PointMaterialImpl: () => (/* binding */ PointMaterialImpl)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.3/node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/../../node_modules/.pnpm/three@0.158.0/node_modules/three/build/three.module.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.0_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _helpers_constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/constants.js */ \"(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/helpers/constants.js\");\n\n\n\n\n\nconst opaque_fragment = _helpers_constants_js__WEBPACK_IMPORTED_MODULE_2__.version >= 154 ? 'opaque_fragment' : 'output_fragment';\nclass PointMaterialImpl extends three__WEBPACK_IMPORTED_MODULE_3__.PointsMaterial {\n  constructor(props) {\n    super(props);\n    this.onBeforeCompile = (shader, renderer) => {\n      const {\n        isWebGL2\n      } = renderer.capabilities;\n      shader.fragmentShader = shader.fragmentShader.replace(`#include <${opaque_fragment}>`, `\n        ${!isWebGL2 ? `#extension GL_OES_standard_derivatives : enable\\n#include <${opaque_fragment}>` : `#include <${opaque_fragment}>`}\n      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n      float r = dot(cxy, cxy);\n      float delta = fwidth(r);     \n      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );\n      #include <tonemapping_fragment>\n      #include <${_helpers_constants_js__WEBPACK_IMPORTED_MODULE_2__.version >= 154 ? 'colorspace_fragment' : 'encodings_fragment'}>\n      `);\n    };\n  }\n}\nconst PointMaterial = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((props, ref) => {\n  const [material] = react__WEBPACK_IMPORTED_MODULE_1__.useState(() => new PointMaterialImpl(null));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"primitive\", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n    object: material,\n    ref: ref,\n    attach: \"material\"\n  }));\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC10aHJlZStkcmVpQDkuODguMTNfQHJlYWN0LXRocmVlK2ZpYmVyQDguMTUuMTFfQHR5cGVzK3RocmVlQDAuMTU4LjBfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjBfdGhyZWVAMC4xNTguMC9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvY29yZS9Qb2ludE1hdGVyaWFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEQ7QUFDM0I7QUFDQTtBQUNtQjs7QUFFbEQsd0JBQXdCLDBEQUFPO0FBQy9CLGdDQUFnQyxpREFBb0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUix5RUFBeUUsZ0JBQWdCO0FBQ3pGLFVBQVUsMEVBQTBFLGdCQUFnQixrQkFBa0IsZ0JBQWdCO0FBQ3RJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwREFBTyx1REFBdUQ7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNkNBQWdCO0FBQ3JELHFCQUFxQiwyQ0FBYztBQUNuQyxzQkFBc0IsZ0RBQW1CLGNBQWMsOEVBQVEsR0FBRztBQUNsRTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7QUFFMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC10aHJlZStkcmVpQDkuODguMTNfQHJlYWN0LXRocmVlK2ZpYmVyQDguMTUuMTFfQHR5cGVzK3RocmVlQDAuMTU4LjBfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjBfdGhyZWVAMC4xNTguMC9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvY29yZS9Qb2ludE1hdGVyaWFsLmpzP2Y1YjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9leHRlbmRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uL2hlbHBlcnMvY29uc3RhbnRzLmpzJztcblxuY29uc3Qgb3BhcXVlX2ZyYWdtZW50ID0gdmVyc2lvbiA+PSAxNTQgPyAnb3BhcXVlX2ZyYWdtZW50JyA6ICdvdXRwdXRfZnJhZ21lbnQnO1xuY2xhc3MgUG9pbnRNYXRlcmlhbEltcGwgZXh0ZW5kcyBUSFJFRS5Qb2ludHNNYXRlcmlhbCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMub25CZWZvcmVDb21waWxlID0gKHNoYWRlciwgcmVuZGVyZXIpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaXNXZWJHTDJcbiAgICAgIH0gPSByZW5kZXJlci5jYXBhYmlsaXRpZXM7XG4gICAgICBzaGFkZXIuZnJhZ21lbnRTaGFkZXIgPSBzaGFkZXIuZnJhZ21lbnRTaGFkZXIucmVwbGFjZShgI2luY2x1ZGUgPCR7b3BhcXVlX2ZyYWdtZW50fT5gLCBgXG4gICAgICAgICR7IWlzV2ViR0wyID8gYCNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXFxuI2luY2x1ZGUgPCR7b3BhcXVlX2ZyYWdtZW50fT5gIDogYCNpbmNsdWRlIDwke29wYXF1ZV9mcmFnbWVudH0+YH1cbiAgICAgIHZlYzIgY3h5ID0gMi4wICogZ2xfUG9pbnRDb29yZCAtIDEuMDtcbiAgICAgIGZsb2F0IHIgPSBkb3QoY3h5LCBjeHkpO1xuICAgICAgZmxvYXQgZGVsdGEgPSBmd2lkdGgocik7ICAgICBcbiAgICAgIGZsb2F0IG1hc2sgPSAxLjAgLSBzbW9vdGhzdGVwKDEuMCAtIGRlbHRhLCAxLjAgKyBkZWx0YSwgcik7XG4gICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGdsX0ZyYWdDb2xvci5yZ2IsIG1hc2sgKiBnbF9GcmFnQ29sb3IuYSApO1xuICAgICAgI2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxuICAgICAgI2luY2x1ZGUgPCR7dmVyc2lvbiA+PSAxNTQgPyAnY29sb3JzcGFjZV9mcmFnbWVudCcgOiAnZW5jb2RpbmdzX2ZyYWdtZW50J30+XG4gICAgICBgKTtcbiAgICB9O1xuICB9XG59XG5jb25zdCBQb2ludE1hdGVyaWFsID0gLyogQF9fUFVSRV9fICovUmVhY3QuZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCBbbWF0ZXJpYWxdID0gUmVhY3QudXNlU3RhdGUoKCkgPT4gbmV3IFBvaW50TWF0ZXJpYWxJbXBsKG51bGwpKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicHJpbWl0aXZlXCIsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIG9iamVjdDogbWF0ZXJpYWwsXG4gICAgcmVmOiByZWYsXG4gICAgYXR0YWNoOiBcIm1hdGVyaWFsXCJcbiAgfSkpO1xufSk7XG5cbmV4cG9ydCB7IFBvaW50TWF0ZXJpYWwsIFBvaW50TWF0ZXJpYWxJbXBsIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/core/PointMaterial.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/core/Points.js":
/*!****************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/core/Points.js ***!
  \****************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Point: () => (/* binding */ Point),\n/* harmony export */   Points: () => (/* binding */ Points),\n/* harmony export */   PointsBuffer: () => (/* binding */ PointsBuffer),\n/* harmony export */   PositionPoint: () => (/* binding */ PositionPoint)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.3/node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/../../node_modules/.pnpm/three@0.158.0/node_modules/three/build/three.module.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.0_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/../../node_modules/.pnpm/@react-three+fiber@8.15.11_@types+react@18.2.21_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/fiber/dist/react-three-fiber.cjs.dev.js\");\n/* harmony import */ var react_merge_refs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-merge-refs */ \"(ssr)/../../node_modules/.pnpm/react-merge-refs@1.1.0/node_modules/react-merge-refs/dist/index.js\");\n\n\n\n\n\n\nconst _inverseMatrix = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Matrix4();\nconst _ray = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Ray();\nconst _sphere = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Sphere();\nconst _position = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Vector3();\nclass PositionPoint extends three__WEBPACK_IMPORTED_MODULE_3__.Group {\n  constructor() {\n    super();\n    this.size = 0;\n    this.color = new three__WEBPACK_IMPORTED_MODULE_3__.Color('white');\n    this.instance = {\n      current: undefined\n    };\n    this.instanceKey = {\n      current: undefined\n    };\n  }\n\n  // This will allow the virtual instance have bounds\n  get geometry() {\n    var _this$instance$curren;\n    return (_this$instance$curren = this.instance.current) == null ? void 0 : _this$instance$curren.geometry;\n  }\n  raycast(raycaster, intersects) {\n    var _raycaster$params$Poi, _raycaster$params$Poi2;\n    const parent = this.instance.current;\n    if (!parent || !parent.geometry) return;\n    const instanceId = parent.userData.instances.indexOf(this.instanceKey);\n    // If the instance wasn't found or exceeds the parents draw range, bail out\n    if (instanceId === -1 || instanceId > parent.geometry.drawRange.count) return;\n    const threshold = (_raycaster$params$Poi = (_raycaster$params$Poi2 = raycaster.params.Points) == null ? void 0 : _raycaster$params$Poi2.threshold) !== null && _raycaster$params$Poi !== void 0 ? _raycaster$params$Poi : 1;\n    _sphere.set(this.getWorldPosition(_position), threshold);\n    if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n    _inverseMatrix.copy(parent.matrixWorld).invert();\n    _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix);\n    const localThreshold = threshold / ((this.scale.x + this.scale.y + this.scale.z) / 3);\n    const localThresholdSq = localThreshold * localThreshold;\n    const rayPointDistanceSq = _ray.distanceSqToPoint(this.position);\n    if (rayPointDistanceSq < localThresholdSq) {\n      const intersectPoint = new three__WEBPACK_IMPORTED_MODULE_3__.Vector3();\n      _ray.closestPointToPoint(this.position, intersectPoint);\n      intersectPoint.applyMatrix4(this.matrixWorld);\n      const distance = raycaster.ray.origin.distanceTo(intersectPoint);\n      if (distance < raycaster.near || distance > raycaster.far) return;\n      intersects.push({\n        distance: distance,\n        distanceToRay: Math.sqrt(rayPointDistanceSq),\n        point: intersectPoint,\n        index: instanceId,\n        face: null,\n        object: this\n      });\n    }\n  }\n}\nlet i, positionRef;\nconst context = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.createContext(null);\nconst parentMatrix = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Matrix4();\nconst position = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Vector3();\n\n/**\n * Instance implementation, relies on react + context to update the attributes based on the children of this component\n */\nconst PointsInstances = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({\n  children,\n  range,\n  limit = 1000,\n  ...props\n}, ref) => {\n  const parentRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  const [refs, setRefs] = react__WEBPACK_IMPORTED_MODULE_1__.useState([]);\n  const [[positions, colors, sizes]] = react__WEBPACK_IMPORTED_MODULE_1__.useState(() => [new Float32Array(limit * 3), Float32Array.from({\n    length: limit * 3\n  }, () => 1), Float32Array.from({\n    length: limit\n  }, () => 1)]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useEffect(() => {\n    // We might be a frame too late? 🤷‍♂️\n    parentRef.current.geometry.attributes.position.needsUpdate = true;\n  });\n  (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_4__.useFrame)(() => {\n    parentRef.current.updateMatrix();\n    parentRef.current.updateMatrixWorld();\n    parentMatrix.copy(parentRef.current.matrixWorld).invert();\n    parentRef.current.geometry.drawRange.count = Math.min(limit, range !== undefined ? range : limit, refs.length);\n    for (i = 0; i < refs.length; i++) {\n      positionRef = refs[i].current;\n      positionRef.getWorldPosition(position).applyMatrix4(parentMatrix);\n      position.toArray(positions, i * 3);\n      parentRef.current.geometry.attributes.position.needsUpdate = true;\n      positionRef.matrixWorldNeedsUpdate = true;\n      positionRef.color.toArray(colors, i * 3);\n      parentRef.current.geometry.attributes.color.needsUpdate = true;\n      sizes.set([positionRef.size], i);\n      parentRef.current.geometry.attributes.size.needsUpdate = true;\n    }\n  });\n  const api = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => ({\n    getParent: () => parentRef,\n    subscribe: ref => {\n      setRefs(refs => [...refs, ref]);\n      return () => setRefs(refs => refs.filter(item => item.current !== ref.current));\n    }\n  }), []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"points\", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    userData: {\n      instances: refs\n    },\n    matrixAutoUpdate: false,\n    ref: (0,react_merge_refs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])([ref, parentRef]),\n    raycast: () => null\n  }, props), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferGeometry\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferAttribute\", {\n    attach: \"attributes-position\",\n    count: positions.length / 3,\n    array: positions,\n    itemSize: 3,\n    usage: three__WEBPACK_IMPORTED_MODULE_3__.DynamicDrawUsage\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferAttribute\", {\n    attach: \"attributes-color\",\n    count: colors.length / 3,\n    array: colors,\n    itemSize: 3,\n    usage: three__WEBPACK_IMPORTED_MODULE_3__.DynamicDrawUsage\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferAttribute\", {\n    attach: \"attributes-size\",\n    count: sizes.length,\n    array: sizes,\n    itemSize: 1,\n    usage: three__WEBPACK_IMPORTED_MODULE_3__.DynamicDrawUsage\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(context.Provider, {\n    value: api\n  }, children));\n});\nconst Point = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({\n  children,\n  ...props\n}, ref) => {\n  react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_4__.extend)({\n    PositionPoint\n  }), []);\n  const group = react__WEBPACK_IMPORTED_MODULE_1__.useRef();\n  const {\n    subscribe,\n    getParent\n  } = react__WEBPACK_IMPORTED_MODULE_1__.useContext(context);\n  react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => subscribe(group), []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"positionPoint\", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    instance: getParent(),\n    instanceKey: group,\n    ref: (0,react_merge_refs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])([ref, group])\n  }, props), children);\n});\n\n/**\n * Buffer implementation, relies on complete buffers of the correct number, leaves it to the user to update them\n */\n\nconst PointsBuffer = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({\n  children,\n  positions,\n  colors,\n  sizes,\n  stride = 3,\n  ...props\n}, forwardedRef) => {\n  const pointsRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_4__.useFrame)(() => {\n    const attr = pointsRef.current.geometry.attributes;\n    attr.position.needsUpdate = true;\n    if (colors) attr.color.needsUpdate = true;\n    if (sizes) attr.size.needsUpdate = true;\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"points\", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    ref: (0,react_merge_refs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])([forwardedRef, pointsRef])\n  }, props), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferGeometry\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferAttribute\", {\n    attach: \"attributes-position\",\n    count: positions.length / stride,\n    array: positions,\n    itemSize: stride,\n    usage: three__WEBPACK_IMPORTED_MODULE_3__.DynamicDrawUsage\n  }), colors && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferAttribute\", {\n    attach: \"attributes-color\",\n    count: colors.length / stride,\n    array: colors,\n    itemSize: 3,\n    usage: three__WEBPACK_IMPORTED_MODULE_3__.DynamicDrawUsage\n  }), sizes && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"bufferAttribute\", {\n    attach: \"attributes-size\",\n    count: sizes.length / stride,\n    array: sizes,\n    itemSize: 1,\n    usage: three__WEBPACK_IMPORTED_MODULE_3__.DynamicDrawUsage\n  })), children);\n});\nconst Points = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((props, forwardedRef) => {\n  if (props.positions instanceof Float32Array) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(PointsBuffer, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n      ref: forwardedRef\n    }));\n  } else return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(PointsInstances, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n    ref: forwardedRef\n  }));\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC10aHJlZStkcmVpQDkuODguMTNfQHJlYWN0LXRocmVlK2ZpYmVyQDguMTUuMTFfQHR5cGVzK3RocmVlQDAuMTU4LjBfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjBfdGhyZWVAMC4xNTguMC9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvY29yZS9Qb2ludHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUEwRDtBQUMzQjtBQUNBO0FBQ3VCO0FBQ2I7O0FBRXpDLDBDQUEwQywwQ0FBYTtBQUN2RCxnQ0FBZ0Msc0NBQVM7QUFDekMsbUNBQW1DLHlDQUFZO0FBQy9DLHFDQUFxQywwQ0FBYTtBQUNsRCw0QkFBNEIsd0NBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdDQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywwQ0FBYTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdEQUFtQjtBQUNsRCx3Q0FBd0MsMENBQWE7QUFDckQsb0NBQW9DLDBDQUFhOztBQUVqRDtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsNkNBQWdCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELG9CQUFvQix5Q0FBWTtBQUNoQywwQkFBMEIsMkNBQWM7QUFDeEMsdUNBQXVDLDJDQUFjO0FBQ3JEO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILEVBQUUsNENBQWU7QUFDakI7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLDREQUFRO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUJBQWlCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGNBQWMsMENBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxzQkFBc0IsZ0RBQW1CLFdBQVcsOEVBQVE7QUFDNUQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFNBQVMsNERBQVM7QUFDbEI7QUFDQSxHQUFHLHVCQUF1QixnREFBbUIsc0NBQXNDLGdEQUFtQjtBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQXNCO0FBQ2pDLEdBQUcsZ0JBQWdCLGdEQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQXNCO0FBQ2pDLEdBQUcsZ0JBQWdCLGdEQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQXNCO0FBQ2pDLEdBQUcsaUJBQWlCLGdEQUFtQjtBQUN2QztBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QsNkJBQTZCLDZDQUFnQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELEVBQUUsMENBQWEsT0FBTywwREFBTTtBQUM1QjtBQUNBLEdBQUc7QUFDSCxnQkFBZ0IseUNBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsSUFBSSxFQUFFLDZDQUFnQjtBQUN0QixFQUFFLGtEQUFxQjtBQUN2QixzQkFBc0IsZ0RBQW1CLGtCQUFrQiw4RUFBUTtBQUNuRTtBQUNBO0FBQ0EsU0FBUyw0REFBUztBQUNsQixHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUEsb0NBQW9DLDZDQUFnQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsb0JBQW9CLHlDQUFZO0FBQ2hDLEVBQUUsNERBQVE7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxzQkFBc0IsZ0RBQW1CLFdBQVcsOEVBQVE7QUFDNUQsU0FBUyw0REFBUztBQUNsQixHQUFHLHVCQUF1QixnREFBbUIsc0NBQXNDLGdEQUFtQjtBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQXNCO0FBQ2pDLEdBQUcsMEJBQTBCLGdEQUFtQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQXNCO0FBQ2pDLEdBQUcseUJBQXlCLGdEQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsbURBQXNCO0FBQ2pDLEdBQUc7QUFDSCxDQUFDO0FBQ0QsOEJBQThCLDZDQUFnQjtBQUM5QztBQUNBLHdCQUF3QixnREFBbUIsZUFBZSw4RUFBUSxHQUFHO0FBQ3JFO0FBQ0EsS0FBSztBQUNMLElBQUkseUJBQXlCLGdEQUFtQixrQkFBa0IsOEVBQVEsR0FBRztBQUM3RTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVxRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LXRocmVlK2RyZWlAOS44OC4xM19AcmVhY3QtdGhyZWUrZmliZXJAOC4xNS4xMV9AdHlwZXMrdGhyZWVAMC4xNTguMF9yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMF90aHJlZUAwLjE1OC4wL25vZGVfbW9kdWxlcy9AcmVhY3QtdGhyZWUvZHJlaS9jb3JlL1BvaW50cy5qcz8yZDVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZXh0ZW5kcyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGV4dGVuZCwgdXNlRnJhbWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInO1xuaW1wb3J0IG1lcmdlUmVmcyBmcm9tICdyZWFjdC1tZXJnZS1yZWZzJztcblxuY29uc3QgX2ludmVyc2VNYXRyaXggPSAvKiBAX19QVVJFX18gKi9uZXcgVEhSRUUuTWF0cml4NCgpO1xuY29uc3QgX3JheSA9IC8qIEBfX1BVUkVfXyAqL25ldyBUSFJFRS5SYXkoKTtcbmNvbnN0IF9zcGhlcmUgPSAvKiBAX19QVVJFX18gKi9uZXcgVEhSRUUuU3BoZXJlKCk7XG5jb25zdCBfcG9zaXRpb24gPSAvKiBAX19QVVJFX18gKi9uZXcgVEhSRUUuVmVjdG9yMygpO1xuY2xhc3MgUG9zaXRpb25Qb2ludCBleHRlbmRzIFRIUkVFLkdyb3VwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNpemUgPSAwO1xuICAgIHRoaXMuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoJ3doaXRlJyk7XG4gICAgdGhpcy5pbnN0YW5jZSA9IHtcbiAgICAgIGN1cnJlbnQ6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgdGhpcy5pbnN0YW5jZUtleSA9IHtcbiAgICAgIGN1cnJlbnQ6IHVuZGVmaW5lZFxuICAgIH07XG4gIH1cblxuICAvLyBUaGlzIHdpbGwgYWxsb3cgdGhlIHZpcnR1YWwgaW5zdGFuY2UgaGF2ZSBib3VuZHNcbiAgZ2V0IGdlb21ldHJ5KCkge1xuICAgIHZhciBfdGhpcyRpbnN0YW5jZSRjdXJyZW47XG4gICAgcmV0dXJuIChfdGhpcyRpbnN0YW5jZSRjdXJyZW4gPSB0aGlzLmluc3RhbmNlLmN1cnJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfdGhpcyRpbnN0YW5jZSRjdXJyZW4uZ2VvbWV0cnk7XG4gIH1cbiAgcmF5Y2FzdChyYXljYXN0ZXIsIGludGVyc2VjdHMpIHtcbiAgICB2YXIgX3JheWNhc3RlciRwYXJhbXMkUG9pLCBfcmF5Y2FzdGVyJHBhcmFtcyRQb2kyO1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuaW5zdGFuY2UuY3VycmVudDtcbiAgICBpZiAoIXBhcmVudCB8fCAhcGFyZW50Lmdlb21ldHJ5KSByZXR1cm47XG4gICAgY29uc3QgaW5zdGFuY2VJZCA9IHBhcmVudC51c2VyRGF0YS5pbnN0YW5jZXMuaW5kZXhPZih0aGlzLmluc3RhbmNlS2V5KTtcbiAgICAvLyBJZiB0aGUgaW5zdGFuY2Ugd2Fzbid0IGZvdW5kIG9yIGV4Y2VlZHMgdGhlIHBhcmVudHMgZHJhdyByYW5nZSwgYmFpbCBvdXRcbiAgICBpZiAoaW5zdGFuY2VJZCA9PT0gLTEgfHwgaW5zdGFuY2VJZCA+IHBhcmVudC5nZW9tZXRyeS5kcmF3UmFuZ2UuY291bnQpIHJldHVybjtcbiAgICBjb25zdCB0aHJlc2hvbGQgPSAoX3JheWNhc3RlciRwYXJhbXMkUG9pID0gKF9yYXljYXN0ZXIkcGFyYW1zJFBvaTIgPSByYXljYXN0ZXIucGFyYW1zLlBvaW50cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9yYXljYXN0ZXIkcGFyYW1zJFBvaTIudGhyZXNob2xkKSAhPT0gbnVsbCAmJiBfcmF5Y2FzdGVyJHBhcmFtcyRQb2kgIT09IHZvaWQgMCA/IF9yYXljYXN0ZXIkcGFyYW1zJFBvaSA6IDE7XG4gICAgX3NwaGVyZS5zZXQodGhpcy5nZXRXb3JsZFBvc2l0aW9uKF9wb3NpdGlvbiksIHRocmVzaG9sZCk7XG4gICAgaWYgKHJheWNhc3Rlci5yYXkuaW50ZXJzZWN0c1NwaGVyZShfc3BoZXJlKSA9PT0gZmFsc2UpIHJldHVybjtcbiAgICBfaW52ZXJzZU1hdHJpeC5jb3B5KHBhcmVudC5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7XG4gICAgX3JheS5jb3B5KHJheWNhc3Rlci5yYXkpLmFwcGx5TWF0cml4NChfaW52ZXJzZU1hdHJpeCk7XG4gICAgY29uc3QgbG9jYWxUaHJlc2hvbGQgPSB0aHJlc2hvbGQgLyAoKHRoaXMuc2NhbGUueCArIHRoaXMuc2NhbGUueSArIHRoaXMuc2NhbGUueikgLyAzKTtcbiAgICBjb25zdCBsb2NhbFRocmVzaG9sZFNxID0gbG9jYWxUaHJlc2hvbGQgKiBsb2NhbFRocmVzaG9sZDtcbiAgICBjb25zdCByYXlQb2ludERpc3RhbmNlU3EgPSBfcmF5LmRpc3RhbmNlU3FUb1BvaW50KHRoaXMucG9zaXRpb24pO1xuICAgIGlmIChyYXlQb2ludERpc3RhbmNlU3EgPCBsb2NhbFRocmVzaG9sZFNxKSB7XG4gICAgICBjb25zdCBpbnRlcnNlY3RQb2ludCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICBfcmF5LmNsb3Nlc3RQb2ludFRvUG9pbnQodGhpcy5wb3NpdGlvbiwgaW50ZXJzZWN0UG9pbnQpO1xuICAgICAgaW50ZXJzZWN0UG9pbnQuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpO1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSByYXljYXN0ZXIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGludGVyc2VjdFBvaW50KTtcbiAgICAgIGlmIChkaXN0YW5jZSA8IHJheWNhc3Rlci5uZWFyIHx8IGRpc3RhbmNlID4gcmF5Y2FzdGVyLmZhcikgcmV0dXJuO1xuICAgICAgaW50ZXJzZWN0cy5wdXNoKHtcbiAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlLFxuICAgICAgICBkaXN0YW5jZVRvUmF5OiBNYXRoLnNxcnQocmF5UG9pbnREaXN0YW5jZVNxKSxcbiAgICAgICAgcG9pbnQ6IGludGVyc2VjdFBvaW50LFxuICAgICAgICBpbmRleDogaW5zdGFuY2VJZCxcbiAgICAgICAgZmFjZTogbnVsbCxcbiAgICAgICAgb2JqZWN0OiB0aGlzXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbmxldCBpLCBwb3NpdGlvblJlZjtcbmNvbnN0IGNvbnRleHQgPSAvKiBAX19QVVJFX18gKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuY29uc3QgcGFyZW50TWF0cml4ID0gLyogQF9fUFVSRV9fICovbmV3IFRIUkVFLk1hdHJpeDQoKTtcbmNvbnN0IHBvc2l0aW9uID0gLyogQF9fUFVSRV9fICovbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuLyoqXG4gKiBJbnN0YW5jZSBpbXBsZW1lbnRhdGlvbiwgcmVsaWVzIG9uIHJlYWN0ICsgY29udGV4dCB0byB1cGRhdGUgdGhlIGF0dHJpYnV0ZXMgYmFzZWQgb24gdGhlIGNoaWxkcmVuIG9mIHRoaXMgY29tcG9uZW50XG4gKi9cbmNvbnN0IFBvaW50c0luc3RhbmNlcyA9IC8qIEBfX1BVUkVfXyAqL1JlYWN0LmZvcndhcmRSZWYoKHtcbiAgY2hpbGRyZW4sXG4gIHJhbmdlLFxuICBsaW1pdCA9IDEwMDAsXG4gIC4uLnByb3BzXG59LCByZWYpID0+IHtcbiAgY29uc3QgcGFyZW50UmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCBbcmVmcywgc2V0UmVmc10gPSBSZWFjdC51c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtbcG9zaXRpb25zLCBjb2xvcnMsIHNpemVzXV0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiBbbmV3IEZsb2F0MzJBcnJheShsaW1pdCAqIDMpLCBGbG9hdDMyQXJyYXkuZnJvbSh7XG4gICAgbGVuZ3RoOiBsaW1pdCAqIDNcbiAgfSwgKCkgPT4gMSksIEZsb2F0MzJBcnJheS5mcm9tKHtcbiAgICBsZW5ndGg6IGxpbWl0XG4gIH0sICgpID0+IDEpXSk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gV2UgbWlnaHQgYmUgYSBmcmFtZSB0b28gbGF0ZT8g8J+kt+KAjeKZgu+4j1xuICAgIHBhcmVudFJlZi5jdXJyZW50Lmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xuICB9KTtcbiAgdXNlRnJhbWUoKCkgPT4ge1xuICAgIHBhcmVudFJlZi5jdXJyZW50LnVwZGF0ZU1hdHJpeCgpO1xuICAgIHBhcmVudFJlZi5jdXJyZW50LnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG4gICAgcGFyZW50TWF0cml4LmNvcHkocGFyZW50UmVmLmN1cnJlbnQubWF0cml4V29ybGQpLmludmVydCgpO1xuICAgIHBhcmVudFJlZi5jdXJyZW50Lmdlb21ldHJ5LmRyYXdSYW5nZS5jb3VudCA9IE1hdGgubWluKGxpbWl0LCByYW5nZSAhPT0gdW5kZWZpbmVkID8gcmFuZ2UgOiBsaW1pdCwgcmVmcy5sZW5ndGgpO1xuICAgIGZvciAoaSA9IDA7IGkgPCByZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwb3NpdGlvblJlZiA9IHJlZnNbaV0uY3VycmVudDtcbiAgICAgIHBvc2l0aW9uUmVmLmdldFdvcmxkUG9zaXRpb24ocG9zaXRpb24pLmFwcGx5TWF0cml4NChwYXJlbnRNYXRyaXgpO1xuICAgICAgcG9zaXRpb24udG9BcnJheShwb3NpdGlvbnMsIGkgKiAzKTtcbiAgICAgIHBhcmVudFJlZi5jdXJyZW50Lmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgcG9zaXRpb25SZWYubWF0cml4V29ybGROZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICBwb3NpdGlvblJlZi5jb2xvci50b0FycmF5KGNvbG9ycywgaSAqIDMpO1xuICAgICAgcGFyZW50UmVmLmN1cnJlbnQuZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvci5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICBzaXplcy5zZXQoW3Bvc2l0aW9uUmVmLnNpemVdLCBpKTtcbiAgICAgIHBhcmVudFJlZi5jdXJyZW50Lmdlb21ldHJ5LmF0dHJpYnV0ZXMuc2l6ZS5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgYXBpID0gUmVhY3QudXNlTWVtbygoKSA9PiAoe1xuICAgIGdldFBhcmVudDogKCkgPT4gcGFyZW50UmVmLFxuICAgIHN1YnNjcmliZTogcmVmID0+IHtcbiAgICAgIHNldFJlZnMocmVmcyA9PiBbLi4ucmVmcywgcmVmXSk7XG4gICAgICByZXR1cm4gKCkgPT4gc2V0UmVmcyhyZWZzID0+IHJlZnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jdXJyZW50ICE9PSByZWYuY3VycmVudCkpO1xuICAgIH1cbiAgfSksIFtdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicG9pbnRzXCIsIF9leHRlbmRzKHtcbiAgICB1c2VyRGF0YToge1xuICAgICAgaW5zdGFuY2VzOiByZWZzXG4gICAgfSxcbiAgICBtYXRyaXhBdXRvVXBkYXRlOiBmYWxzZSxcbiAgICByZWY6IG1lcmdlUmVmcyhbcmVmLCBwYXJlbnRSZWZdKSxcbiAgICByYXljYXN0OiAoKSA9PiBudWxsXG4gIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidWZmZXJHZW9tZXRyeVwiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1ZmZlckF0dHJpYnV0ZVwiLCB7XG4gICAgYXR0YWNoOiBcImF0dHJpYnV0ZXMtcG9zaXRpb25cIixcbiAgICBjb3VudDogcG9zaXRpb25zLmxlbmd0aCAvIDMsXG4gICAgYXJyYXk6IHBvc2l0aW9ucyxcbiAgICBpdGVtU2l6ZTogMyxcbiAgICB1c2FnZTogVEhSRUUuRHluYW1pY0RyYXdVc2FnZVxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidWZmZXJBdHRyaWJ1dGVcIiwge1xuICAgIGF0dGFjaDogXCJhdHRyaWJ1dGVzLWNvbG9yXCIsXG4gICAgY291bnQ6IGNvbG9ycy5sZW5ndGggLyAzLFxuICAgIGFycmF5OiBjb2xvcnMsXG4gICAgaXRlbVNpemU6IDMsXG4gICAgdXNhZ2U6IFRIUkVFLkR5bmFtaWNEcmF3VXNhZ2VcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnVmZmVyQXR0cmlidXRlXCIsIHtcbiAgICBhdHRhY2g6IFwiYXR0cmlidXRlcy1zaXplXCIsXG4gICAgY291bnQ6IHNpemVzLmxlbmd0aCxcbiAgICBhcnJheTogc2l6ZXMsXG4gICAgaXRlbVNpemU6IDEsXG4gICAgdXNhZ2U6IFRIUkVFLkR5bmFtaWNEcmF3VXNhZ2VcbiAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChjb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGFwaVxuICB9LCBjaGlsZHJlbikpO1xufSk7XG5jb25zdCBQb2ludCA9IC8qIEBfX1BVUkVfXyAqL1JlYWN0LmZvcndhcmRSZWYoKHtcbiAgY2hpbGRyZW4sXG4gIC4uLnByb3BzXG59LCByZWYpID0+IHtcbiAgUmVhY3QudXNlTWVtbygoKSA9PiBleHRlbmQoe1xuICAgIFBvc2l0aW9uUG9pbnRcbiAgfSksIFtdKTtcbiAgY29uc3QgZ3JvdXAgPSBSZWFjdC51c2VSZWYoKTtcbiAgY29uc3Qge1xuICAgIHN1YnNjcmliZSxcbiAgICBnZXRQYXJlbnRcbiAgfSA9IFJlYWN0LnVzZUNvbnRleHQoY29udGV4dCk7XG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiBzdWJzY3JpYmUoZ3JvdXApLCBbXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBvc2l0aW9uUG9pbnRcIiwgX2V4dGVuZHMoe1xuICAgIGluc3RhbmNlOiBnZXRQYXJlbnQoKSxcbiAgICBpbnN0YW5jZUtleTogZ3JvdXAsXG4gICAgcmVmOiBtZXJnZVJlZnMoW3JlZiwgZ3JvdXBdKVxuICB9LCBwcm9wcyksIGNoaWxkcmVuKTtcbn0pO1xuXG4vKipcbiAqIEJ1ZmZlciBpbXBsZW1lbnRhdGlvbiwgcmVsaWVzIG9uIGNvbXBsZXRlIGJ1ZmZlcnMgb2YgdGhlIGNvcnJlY3QgbnVtYmVyLCBsZWF2ZXMgaXQgdG8gdGhlIHVzZXIgdG8gdXBkYXRlIHRoZW1cbiAqL1xuXG5jb25zdCBQb2ludHNCdWZmZXIgPSAvKiBAX19QVVJFX18gKi9SZWFjdC5mb3J3YXJkUmVmKCh7XG4gIGNoaWxkcmVuLFxuICBwb3NpdGlvbnMsXG4gIGNvbG9ycyxcbiAgc2l6ZXMsXG4gIHN0cmlkZSA9IDMsXG4gIC4uLnByb3BzXG59LCBmb3J3YXJkZWRSZWYpID0+IHtcbiAgY29uc3QgcG9pbnRzUmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICB1c2VGcmFtZSgoKSA9PiB7XG4gICAgY29uc3QgYXR0ciA9IHBvaW50c1JlZi5jdXJyZW50Lmdlb21ldHJ5LmF0dHJpYnV0ZXM7XG4gICAgYXR0ci5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgaWYgKGNvbG9ycykgYXR0ci5jb2xvci5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgaWYgKHNpemVzKSBhdHRyLnNpemUubmVlZHNVcGRhdGUgPSB0cnVlO1xuICB9KTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicG9pbnRzXCIsIF9leHRlbmRzKHtcbiAgICByZWY6IG1lcmdlUmVmcyhbZm9yd2FyZGVkUmVmLCBwb2ludHNSZWZdKVxuICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnVmZmVyR2VvbWV0cnlcIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidWZmZXJBdHRyaWJ1dGVcIiwge1xuICAgIGF0dGFjaDogXCJhdHRyaWJ1dGVzLXBvc2l0aW9uXCIsXG4gICAgY291bnQ6IHBvc2l0aW9ucy5sZW5ndGggLyBzdHJpZGUsXG4gICAgYXJyYXk6IHBvc2l0aW9ucyxcbiAgICBpdGVtU2l6ZTogc3RyaWRlLFxuICAgIHVzYWdlOiBUSFJFRS5EeW5hbWljRHJhd1VzYWdlXG4gIH0pLCBjb2xvcnMgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidWZmZXJBdHRyaWJ1dGVcIiwge1xuICAgIGF0dGFjaDogXCJhdHRyaWJ1dGVzLWNvbG9yXCIsXG4gICAgY291bnQ6IGNvbG9ycy5sZW5ndGggLyBzdHJpZGUsXG4gICAgYXJyYXk6IGNvbG9ycyxcbiAgICBpdGVtU2l6ZTogMyxcbiAgICB1c2FnZTogVEhSRUUuRHluYW1pY0RyYXdVc2FnZVxuICB9KSwgc2l6ZXMgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidWZmZXJBdHRyaWJ1dGVcIiwge1xuICAgIGF0dGFjaDogXCJhdHRyaWJ1dGVzLXNpemVcIixcbiAgICBjb3VudDogc2l6ZXMubGVuZ3RoIC8gc3RyaWRlLFxuICAgIGFycmF5OiBzaXplcyxcbiAgICBpdGVtU2l6ZTogMSxcbiAgICB1c2FnZTogVEhSRUUuRHluYW1pY0RyYXdVc2FnZVxuICB9KSksIGNoaWxkcmVuKTtcbn0pO1xuY29uc3QgUG9pbnRzID0gLyogQF9fUFVSRV9fICovUmVhY3QuZm9yd2FyZFJlZigocHJvcHMsIGZvcndhcmRlZFJlZikgPT4ge1xuICBpZiAocHJvcHMucG9zaXRpb25zIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBvaW50c0J1ZmZlciwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgICByZWY6IGZvcndhcmRlZFJlZlxuICAgIH0pKTtcbiAgfSBlbHNlIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb2ludHNJbnN0YW5jZXMsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHJlZjogZm9yd2FyZGVkUmVmXG4gIH0pKTtcbn0pO1xuXG5leHBvcnQgeyBQb2ludCwgUG9pbnRzLCBQb2ludHNCdWZmZXIsIFBvc2l0aW9uUG9pbnQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/core/Points.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/helpers/constants.js":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/helpers/constants.js ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/../../node_modules/.pnpm/three@0.158.0/node_modules/three/build/three.module.js\");\n\n\nconst getVersion = () => parseInt(three__WEBPACK_IMPORTED_MODULE_0__.REVISION.replace(/\\D+/g, ''));\nconst version = /* @__PURE__ */getVersion();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC10aHJlZStkcmVpQDkuODguMTNfQHJlYWN0LXRocmVlK2ZpYmVyQDguMTUuMTFfQHR5cGVzK3RocmVlQDAuMTU4LjBfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjBfdGhyZWVAMC4xNTguMC9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvaGVscGVycy9jb25zdGFudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUM7O0FBRWpDLGtDQUFrQywyQ0FBUTtBQUMxQzs7QUFFbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC10aHJlZStkcmVpQDkuODguMTNfQHJlYWN0LXRocmVlK2ZpYmVyQDguMTUuMTFfQHR5cGVzK3RocmVlQDAuMTU4LjBfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjBfdGhyZWVAMC4xNTguMC9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvaGVscGVycy9jb25zdGFudHMuanM/YmEwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSRVZJU0lPTiB9IGZyb20gJ3RocmVlJztcblxuY29uc3QgZ2V0VmVyc2lvbiA9ICgpID0+IHBhcnNlSW50KFJFVklTSU9OLnJlcGxhY2UoL1xcRCsvZywgJycpKTtcbmNvbnN0IHZlcnNpb24gPSAvKiBAX19QVVJFX18gKi9nZXRWZXJzaW9uKCk7XG5cbmV4cG9ydCB7IHZlcnNpb24gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/helpers/constants.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/web/Html.js":
/*!*************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/web/Html.js ***!
  \*************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Html: () => (/* binding */ Html)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"(ssr)/../../node_modules/.pnpm/@babel+runtime@7.28.3/node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.0.0_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom/client */ \"(ssr)/../../node_modules/.pnpm/next@14.0.0_react-dom@18.2.0_react@18.2.0/node_modules/next/dist/compiled/react-dom/client.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/../../node_modules/.pnpm/three@0.158.0/node_modules/three/build/three.module.js\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/../../node_modules/.pnpm/@react-three+fiber@8.15.11_@types+react@18.2.21_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/fiber/dist/react-three-fiber.cjs.dev.js\");\n\n\n\n\n\n\nconst v1 = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Vector3();\nconst v2 = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Vector3();\nconst v3 = /* @__PURE__ */new three__WEBPACK_IMPORTED_MODULE_3__.Vector3();\nfunction defaultCalculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\nfunction isObjectVisible(el, camera, raycaster, occlude) {\n  const elPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const screenPos = elPos.clone();\n  screenPos.project(camera);\n  raycaster.setFromCamera(screenPos, camera);\n  const intersects = raycaster.intersectObjects(occlude, true);\n  if (intersects.length) {\n    const intersectionDistance = intersects[0].distance;\n    const pointDistance = elPos.distanceTo(raycaster.ray.origin);\n    return pointDistance < intersectionDistance;\n  }\n  return true;\n}\nfunction objectScale(el, camera) {\n  if (camera instanceof three__WEBPACK_IMPORTED_MODULE_3__.OrthographicCamera) {\n    return camera.zoom;\n  } else if (camera instanceof three__WEBPACK_IMPORTED_MODULE_3__.PerspectiveCamera) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    const scaleFOV = 2 * Math.tan(vFOV / 2) * dist;\n    return 1 / scaleFOV;\n  } else {\n    return 1;\n  }\n}\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof three__WEBPACK_IMPORTED_MODULE_3__.PerspectiveCamera || camera instanceof three__WEBPACK_IMPORTED_MODULE_3__.OrthographicCamera) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n  return undefined;\n}\nconst epsilon = value => Math.abs(value) < 1e-10 ? 0 : value;\nfunction getCSSMatrix(matrix, multipliers, prepend = '') {\n  let matrix3d = 'matrix3d(';\n  for (let i = 0; i !== 16; i++) {\n    matrix3d += epsilon(multipliers[i] * matrix.elements[i]) + (i !== 15 ? ',' : ')');\n  }\n  return prepend + matrix3d;\n}\nconst getCameraCSSMatrix = (multipliers => {\n  return matrix => getCSSMatrix(matrix, multipliers);\n})([1, -1, 1, 1, 1, -1, 1, 1, 1, -1, 1, 1, 1, -1, 1, 1]);\nconst getObjectCSSMatrix = (scaleMultipliers => {\n  return (matrix, factor) => getCSSMatrix(matrix, scaleMultipliers(factor), 'translate(-50%,-50%)');\n})(f => [1 / f, 1 / f, 1 / f, 1, -1 / f, -1 / f, -1 / f, -1, 1 / f, 1 / f, 1 / f, 1, 1, 1, 1, 1]);\nfunction isRefObject(ref) {\n  return ref && typeof ref === 'object' && 'current' in ref;\n}\nconst Html = /* @__PURE__ */react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({\n  children,\n  eps = 0.001,\n  style,\n  className,\n  prepend,\n  center,\n  fullscreen,\n  portal,\n  distanceFactor,\n  sprite = false,\n  transform = false,\n  occlude,\n  onOcclude,\n  castShadow,\n  receiveShadow,\n  material,\n  geometry,\n  zIndexRange = [16777271, 0],\n  calculatePosition = defaultCalculatePosition,\n  as = 'div',\n  wrapperClass,\n  pointerEvents = 'auto',\n  ...props\n}, ref) => {\n  const {\n    gl,\n    camera,\n    scene,\n    size,\n    raycaster,\n    events,\n    viewport\n  } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_4__.useThree)();\n  const [el] = react__WEBPACK_IMPORTED_MODULE_1__.useState(() => document.createElement(as));\n  const root = react__WEBPACK_IMPORTED_MODULE_1__.useRef();\n  const group = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  const oldZoom = react__WEBPACK_IMPORTED_MODULE_1__.useRef(0);\n  const oldPosition = react__WEBPACK_IMPORTED_MODULE_1__.useRef([0, 0]);\n  const transformOuterRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  const transformInnerRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  // Append to the connected element, which makes HTML work with views\n  const target = (portal == null ? void 0 : portal.current) || events.connected || gl.domElement.parentNode;\n  const occlusionMeshRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  const isMeshSizeSet = react__WEBPACK_IMPORTED_MODULE_1__.useRef(false);\n  const isRayCastOcclusion = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => {\n    return occlude && occlude !== 'blending' || Array.isArray(occlude) && occlude.length && isRefObject(occlude[0]);\n  }, [occlude]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n    const el = gl.domElement;\n    if (occlude && occlude === 'blending') {\n      el.style.zIndex = `${Math.floor(zIndexRange[0] / 2)}`;\n      el.style.position = 'absolute';\n      el.style.pointerEvents = 'none';\n    } else {\n      el.style.zIndex = null;\n      el.style.position = null;\n      el.style.pointerEvents = null;\n    }\n  }, [occlude]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n    if (group.current) {\n      const currentRoot = root.current = react_dom_client__WEBPACK_IMPORTED_MODULE_2__.createRoot(el);\n      scene.updateMatrixWorld();\n      if (transform) {\n        el.style.cssText = `position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;`;\n      } else {\n        const vec = calculatePosition(group.current, camera, size);\n        el.style.cssText = `position:absolute;top:0;left:0;transform:translate3d(${vec[0]}px,${vec[1]}px,0);transform-origin:0 0;`;\n      }\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n      return () => {\n        if (target) target.removeChild(el);\n        currentRoot.unmount();\n      };\n    }\n  }, [target, transform]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n    if (wrapperClass) el.className = wrapperClass;\n  }, [wrapperClass]);\n  const styles = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => {\n    if (transform) {\n      return {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: size.width,\n        height: size.height,\n        transformStyle: 'preserve-3d',\n        pointerEvents: 'none'\n      };\n    } else {\n      return {\n        position: 'absolute',\n        transform: center ? 'translate3d(-50%,-50%,0)' : 'none',\n        ...(fullscreen && {\n          top: -size.height / 2,\n          left: -size.width / 2,\n          width: size.width,\n          height: size.height\n        }),\n        ...style\n      };\n    }\n  }, [style, center, fullscreen, size, transform]);\n  const transformInnerStyles = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => ({\n    position: 'absolute',\n    pointerEvents\n  }), [pointerEvents]);\n  react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect(() => {\n    isMeshSizeSet.current = false;\n    if (transform) {\n      var _root$current;\n      (_root$current = root.current) == null || _root$current.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"div\", {\n        ref: transformOuterRef,\n        style: styles\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"div\", {\n        ref: transformInnerRef,\n        style: transformInnerStyles\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"div\", {\n        ref: ref,\n        className: className,\n        style: style,\n        children: children\n      }))));\n    } else {\n      var _root$current2;\n      (_root$current2 = root.current) == null || _root$current2.render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"div\", {\n        ref: ref,\n        style: styles,\n        className: className,\n        children: children\n      }));\n    }\n  });\n  const visible = react__WEBPACK_IMPORTED_MODULE_1__.useRef(true);\n  (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_4__.useFrame)(gl => {\n    if (group.current) {\n      camera.updateMatrixWorld();\n      group.current.updateWorldMatrix(true, false);\n      const vec = transform ? oldPosition.current : calculatePosition(group.current, camera, size);\n      if (transform || Math.abs(oldZoom.current - camera.zoom) > eps || Math.abs(oldPosition.current[0] - vec[0]) > eps || Math.abs(oldPosition.current[1] - vec[1]) > eps) {\n        const isBehindCamera = isObjectBehindCamera(group.current, camera);\n        let raytraceTarget = false;\n        if (isRayCastOcclusion) {\n          if (Array.isArray(occlude)) {\n            raytraceTarget = occlude.map(item => item.current);\n          } else if (occlude !== 'blending') {\n            raytraceTarget = [scene];\n          }\n        }\n        const previouslyVisible = visible.current;\n        if (raytraceTarget) {\n          const isvisible = isObjectVisible(group.current, camera, raycaster, raytraceTarget);\n          visible.current = isvisible && !isBehindCamera;\n        } else {\n          visible.current = !isBehindCamera;\n        }\n        if (previouslyVisible !== visible.current) {\n          if (onOcclude) onOcclude(!visible.current);else el.style.display = visible.current ? 'block' : 'none';\n        }\n        const halfRange = Math.floor(zIndexRange[0] / 2);\n        const zRange = occlude ? isRayCastOcclusion //\n        ? [zIndexRange[0], halfRange] : [halfRange - 1, 0] : zIndexRange;\n        el.style.zIndex = `${objectZIndex(group.current, camera, zRange)}`;\n        if (transform) {\n          const [widthHalf, heightHalf] = [size.width / 2, size.height / 2];\n          const fov = camera.projectionMatrix.elements[5] * heightHalf;\n          const {\n            isOrthographicCamera,\n            top,\n            left,\n            bottom,\n            right\n          } = camera;\n          const cameraMatrix = getCameraCSSMatrix(camera.matrixWorldInverse);\n          const cameraTransform = isOrthographicCamera ? `scale(${fov})translate(${epsilon(-(right + left) / 2)}px,${epsilon((top + bottom) / 2)}px)` : `translateZ(${fov}px)`;\n          let matrix = group.current.matrixWorld;\n          if (sprite) {\n            matrix = camera.matrixWorldInverse.clone().transpose().copyPosition(matrix).scale(group.current.scale);\n            matrix.elements[3] = matrix.elements[7] = matrix.elements[11] = 0;\n            matrix.elements[15] = 1;\n          }\n          el.style.width = size.width + 'px';\n          el.style.height = size.height + 'px';\n          el.style.perspective = isOrthographicCamera ? '' : `${fov}px`;\n          if (transformOuterRef.current && transformInnerRef.current) {\n            transformOuterRef.current.style.transform = `${cameraTransform}${cameraMatrix}translate(${widthHalf}px,${heightHalf}px)`;\n            transformInnerRef.current.style.transform = getObjectCSSMatrix(matrix, 1 / ((distanceFactor || 10) / 400));\n          }\n        } else {\n          const scale = distanceFactor === undefined ? 1 : objectScale(group.current, camera) * distanceFactor;\n          el.style.transform = `translate3d(${vec[0]}px,${vec[1]}px,0) scale(${scale})`;\n        }\n        oldPosition.current = vec;\n        oldZoom.current = camera.zoom;\n      }\n    }\n    if (!isRayCastOcclusion && occlusionMeshRef.current && !isMeshSizeSet.current) {\n      if (transform) {\n        if (transformOuterRef.current) {\n          const el = transformOuterRef.current.children[0];\n          if (el != null && el.clientWidth && el != null && el.clientHeight) {\n            const {\n              isOrthographicCamera\n            } = camera;\n            if (isOrthographicCamera || geometry) {\n              if (props.scale) {\n                if (!Array.isArray(props.scale)) {\n                  occlusionMeshRef.current.scale.setScalar(1 / props.scale);\n                } else if (props.scale instanceof three__WEBPACK_IMPORTED_MODULE_3__.Vector3) {\n                  occlusionMeshRef.current.scale.copy(props.scale.clone().divideScalar(1));\n                } else {\n                  occlusionMeshRef.current.scale.set(1 / props.scale[0], 1 / props.scale[1], 1 / props.scale[2]);\n                }\n              }\n            } else {\n              const ratio = (distanceFactor || 10) / 400;\n              const w = el.clientWidth * ratio;\n              const h = el.clientHeight * ratio;\n              occlusionMeshRef.current.scale.set(w, h, 1);\n            }\n            isMeshSizeSet.current = true;\n          }\n        }\n      } else {\n        const ele = el.children[0];\n        if (ele != null && ele.clientWidth && ele != null && ele.clientHeight) {\n          const ratio = 1 / viewport.factor;\n          const w = ele.clientWidth * ratio;\n          const h = ele.clientHeight * ratio;\n          occlusionMeshRef.current.scale.set(w, h, 1);\n          isMeshSizeSet.current = true;\n        }\n        occlusionMeshRef.current.lookAt(gl.camera.position);\n      }\n    }\n  });\n  const shaders = react__WEBPACK_IMPORTED_MODULE_1__.useMemo(() => ({\n    vertexShader: !transform ? /* glsl */`\n          /*\n            This shader is from the THREE's SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if \"transfrom\" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ` : undefined,\n    fragmentShader: /* glsl */`\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      `\n  }), [transform]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"group\", (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n    ref: group\n  }), occlude && !isRayCastOcclusion && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"mesh\", {\n    castShadow: castShadow,\n    receiveShadow: receiveShadow,\n    ref: occlusionMeshRef\n  }, geometry || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"planeGeometry\", null), material || /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__.createElement(\"shaderMaterial\", {\n    side: three__WEBPACK_IMPORTED_MODULE_3__.DoubleSide,\n    vertexShader: shaders.vertexShader,\n    fragmentShader: shaders.fragmentShader\n  })));\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC10aHJlZStkcmVpQDkuODguMTNfQHJlYWN0LXRocmVlK2ZpYmVyQDguMTUuMTFfQHR5cGVzK3RocmVlQDAuMTU4LjBfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjBfdGhyZWVAMC4xNTguMC9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvd2ViL0h0bWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwRDtBQUMzQjtBQUNjO0FBQ3NDO0FBQzNCOztBQUV4RCw4QkFBOEIsMENBQU87QUFDckMsOEJBQThCLDBDQUFPO0FBQ3JDLDhCQUE4QiwwQ0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxREFBa0I7QUFDMUM7QUFDQSxJQUFJLDJCQUEyQixvREFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9EQUFpQixzQkFBc0IscURBQWtCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixVQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw2Q0FBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxFQUFFLDREQUFRO0FBQ2QsZUFBZSwyQ0FBYztBQUM3QixlQUFlLHlDQUFZO0FBQzNCLGdCQUFnQix5Q0FBWTtBQUM1QixrQkFBa0IseUNBQVk7QUFDOUIsc0JBQXNCLHlDQUFZO0FBQ2xDLDRCQUE0Qix5Q0FBWTtBQUN4Qyw0QkFBNEIseUNBQVk7QUFDeEM7QUFDQTtBQUNBLDJCQUEyQix5Q0FBWTtBQUN2Qyx3QkFBd0IseUNBQVk7QUFDcEMsNkJBQTZCLDBDQUFhO0FBQzFDO0FBQ0EsR0FBRztBQUNILEVBQUUsa0RBQXFCO0FBQ3ZCO0FBQ0E7QUFDQSwyQkFBMkIsK0JBQStCO0FBQzFEO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxrREFBcUI7QUFDdkI7QUFDQSx5Q0FBeUMsd0RBQW1CO0FBQzVEO0FBQ0E7QUFDQSw4Q0FBOEMsTUFBTSxPQUFPLG9CQUFvQixnQkFBZ0I7QUFDL0YsUUFBUTtBQUNSO0FBQ0EsOENBQThDLE1BQU0sT0FBTyx3QkFBd0IsT0FBTyxLQUFLLE9BQU8sTUFBTSxxQkFBcUI7QUFDakk7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxrREFBcUI7QUFDdkI7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCLDBDQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILCtCQUErQiwwQ0FBYTtBQUM1QztBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsa0RBQXFCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRixnREFBbUI7QUFDdEc7QUFDQTtBQUNBLE9BQU8sZUFBZSxnREFBbUI7QUFDekM7QUFDQTtBQUNBLE9BQU8sZUFBZSxnREFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0EscUZBQXFGLGdEQUFtQjtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSCxrQkFBa0IseUNBQVk7QUFDOUIsRUFBRSw0REFBUTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0Q0FBNEM7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0Esa0VBQWtFLElBQUksYUFBYSw2QkFBNkIsS0FBSyw0QkFBNEIscUJBQXFCLElBQUk7QUFDMUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxJQUFJO0FBQ3BFO0FBQ0EsMkRBQTJELGdCQUFnQixFQUFFLGFBQWEsWUFBWSxVQUFVLEtBQUssV0FBVztBQUNoSTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsOENBQThDLE9BQU8sS0FBSyxPQUFPLGNBQWMsTUFBTTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0NBQWdDLDBDQUFPO0FBQ3pEO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsa0JBQWtCLDBDQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsc0JBQXNCLGdEQUFtQixVQUFVLDhFQUFRLEdBQUc7QUFDOUQ7QUFDQSxHQUFHLGtEQUFrRCxnREFBbUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0EsR0FBRywyQkFBMkIsZ0RBQW1CLGtEQUFrRCxnREFBbUI7QUFDdEgsVUFBVSw2Q0FBVTtBQUNwQjtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC10aHJlZStkcmVpQDkuODguMTNfQHJlYWN0LXRocmVlK2ZpYmVyQDguMTUuMTFfQHR5cGVzK3RocmVlQDAuMTU4LjBfcmVhY3QtZG9tQDE4LjIuMF9yZWFjdEAxOC4yLjBfdGhyZWVAMC4xNTguMC9ub2RlX21vZHVsZXMvQHJlYWN0LXRocmVlL2RyZWkvd2ViL0h0bWwuanM/YjM5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2V4dGVuZHMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcyc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JztcbmltcG9ydCB7IFZlY3RvcjMsIERvdWJsZVNpZGUsIE9ydGhvZ3JhcGhpY0NhbWVyYSwgUGVyc3BlY3RpdmVDYW1lcmEgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgeyB1c2VUaHJlZSwgdXNlRnJhbWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInO1xuXG5jb25zdCB2MSA9IC8qIEBfX1BVUkVfXyAqL25ldyBWZWN0b3IzKCk7XG5jb25zdCB2MiA9IC8qIEBfX1BVUkVfXyAqL25ldyBWZWN0b3IzKCk7XG5jb25zdCB2MyA9IC8qIEBfX1BVUkVfXyAqL25ldyBWZWN0b3IzKCk7XG5mdW5jdGlvbiBkZWZhdWx0Q2FsY3VsYXRlUG9zaXRpb24oZWwsIGNhbWVyYSwgc2l6ZSkge1xuICBjb25zdCBvYmplY3RQb3MgPSB2MS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZWwubWF0cml4V29ybGQpO1xuICBvYmplY3RQb3MucHJvamVjdChjYW1lcmEpO1xuICBjb25zdCB3aWR0aEhhbGYgPSBzaXplLndpZHRoIC8gMjtcbiAgY29uc3QgaGVpZ2h0SGFsZiA9IHNpemUuaGVpZ2h0IC8gMjtcbiAgcmV0dXJuIFtvYmplY3RQb3MueCAqIHdpZHRoSGFsZiArIHdpZHRoSGFsZiwgLShvYmplY3RQb3MueSAqIGhlaWdodEhhbGYpICsgaGVpZ2h0SGFsZl07XG59XG5mdW5jdGlvbiBpc09iamVjdEJlaGluZENhbWVyYShlbCwgY2FtZXJhKSB7XG4gIGNvbnN0IG9iamVjdFBvcyA9IHYxLnNldEZyb21NYXRyaXhQb3NpdGlvbihlbC5tYXRyaXhXb3JsZCk7XG4gIGNvbnN0IGNhbWVyYVBvcyA9IHYyLnNldEZyb21NYXRyaXhQb3NpdGlvbihjYW1lcmEubWF0cml4V29ybGQpO1xuICBjb25zdCBkZWx0YUNhbU9iaiA9IG9iamVjdFBvcy5zdWIoY2FtZXJhUG9zKTtcbiAgY29uc3QgY2FtRGlyID0gY2FtZXJhLmdldFdvcmxkRGlyZWN0aW9uKHYzKTtcbiAgcmV0dXJuIGRlbHRhQ2FtT2JqLmFuZ2xlVG8oY2FtRGlyKSA+IE1hdGguUEkgLyAyO1xufVxuZnVuY3Rpb24gaXNPYmplY3RWaXNpYmxlKGVsLCBjYW1lcmEsIHJheWNhc3Rlciwgb2NjbHVkZSkge1xuICBjb25zdCBlbFBvcyA9IHYxLnNldEZyb21NYXRyaXhQb3NpdGlvbihlbC5tYXRyaXhXb3JsZCk7XG4gIGNvbnN0IHNjcmVlblBvcyA9IGVsUG9zLmNsb25lKCk7XG4gIHNjcmVlblBvcy5wcm9qZWN0KGNhbWVyYSk7XG4gIHJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHNjcmVlblBvcywgY2FtZXJhKTtcbiAgY29uc3QgaW50ZXJzZWN0cyA9IHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKG9jY2x1ZGUsIHRydWUpO1xuICBpZiAoaW50ZXJzZWN0cy5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25EaXN0YW5jZSA9IGludGVyc2VjdHNbMF0uZGlzdGFuY2U7XG4gICAgY29uc3QgcG9pbnREaXN0YW5jZSA9IGVsUG9zLmRpc3RhbmNlVG8ocmF5Y2FzdGVyLnJheS5vcmlnaW4pO1xuICAgIHJldHVybiBwb2ludERpc3RhbmNlIDwgaW50ZXJzZWN0aW9uRGlzdGFuY2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBvYmplY3RTY2FsZShlbCwgY2FtZXJhKSB7XG4gIGlmIChjYW1lcmEgaW5zdGFuY2VvZiBPcnRob2dyYXBoaWNDYW1lcmEpIHtcbiAgICByZXR1cm4gY2FtZXJhLnpvb207XG4gIH0gZWxzZSBpZiAoY2FtZXJhIGluc3RhbmNlb2YgUGVyc3BlY3RpdmVDYW1lcmEpIHtcbiAgICBjb25zdCBvYmplY3RQb3MgPSB2MS5zZXRGcm9tTWF0cml4UG9zaXRpb24oZWwubWF0cml4V29ybGQpO1xuICAgIGNvbnN0IGNhbWVyYVBvcyA9IHYyLnNldEZyb21NYXRyaXhQb3NpdGlvbihjYW1lcmEubWF0cml4V29ybGQpO1xuICAgIGNvbnN0IHZGT1YgPSBjYW1lcmEuZm92ICogTWF0aC5QSSAvIDE4MDtcbiAgICBjb25zdCBkaXN0ID0gb2JqZWN0UG9zLmRpc3RhbmNlVG8oY2FtZXJhUG9zKTtcbiAgICBjb25zdCBzY2FsZUZPViA9IDIgKiBNYXRoLnRhbih2Rk9WIC8gMikgKiBkaXN0O1xuICAgIHJldHVybiAxIC8gc2NhbGVGT1Y7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbn1cbmZ1bmN0aW9uIG9iamVjdFpJbmRleChlbCwgY2FtZXJhLCB6SW5kZXhSYW5nZSkge1xuICBpZiAoY2FtZXJhIGluc3RhbmNlb2YgUGVyc3BlY3RpdmVDYW1lcmEgfHwgY2FtZXJhIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljQ2FtZXJhKSB7XG4gICAgY29uc3Qgb2JqZWN0UG9zID0gdjEuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGVsLm1hdHJpeFdvcmxkKTtcbiAgICBjb25zdCBjYW1lcmFQb3MgPSB2Mi5zZXRGcm9tTWF0cml4UG9zaXRpb24oY2FtZXJhLm1hdHJpeFdvcmxkKTtcbiAgICBjb25zdCBkaXN0ID0gb2JqZWN0UG9zLmRpc3RhbmNlVG8oY2FtZXJhUG9zKTtcbiAgICBjb25zdCBBID0gKHpJbmRleFJhbmdlWzFdIC0gekluZGV4UmFuZ2VbMF0pIC8gKGNhbWVyYS5mYXIgLSBjYW1lcmEubmVhcik7XG4gICAgY29uc3QgQiA9IHpJbmRleFJhbmdlWzFdIC0gQSAqIGNhbWVyYS5mYXI7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoQSAqIGRpc3QgKyBCKTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuY29uc3QgZXBzaWxvbiA9IHZhbHVlID0+IE1hdGguYWJzKHZhbHVlKSA8IDFlLTEwID8gMCA6IHZhbHVlO1xuZnVuY3Rpb24gZ2V0Q1NTTWF0cml4KG1hdHJpeCwgbXVsdGlwbGllcnMsIHByZXBlbmQgPSAnJykge1xuICBsZXQgbWF0cml4M2QgPSAnbWF0cml4M2QoJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDE2OyBpKyspIHtcbiAgICBtYXRyaXgzZCArPSBlcHNpbG9uKG11bHRpcGxpZXJzW2ldICogbWF0cml4LmVsZW1lbnRzW2ldKSArIChpICE9PSAxNSA/ICcsJyA6ICcpJyk7XG4gIH1cbiAgcmV0dXJuIHByZXBlbmQgKyBtYXRyaXgzZDtcbn1cbmNvbnN0IGdldENhbWVyYUNTU01hdHJpeCA9IChtdWx0aXBsaWVycyA9PiB7XG4gIHJldHVybiBtYXRyaXggPT4gZ2V0Q1NTTWF0cml4KG1hdHJpeCwgbXVsdGlwbGllcnMpO1xufSkoWzEsIC0xLCAxLCAxLCAxLCAtMSwgMSwgMSwgMSwgLTEsIDEsIDEsIDEsIC0xLCAxLCAxXSk7XG5jb25zdCBnZXRPYmplY3RDU1NNYXRyaXggPSAoc2NhbGVNdWx0aXBsaWVycyA9PiB7XG4gIHJldHVybiAobWF0cml4LCBmYWN0b3IpID0+IGdldENTU01hdHJpeChtYXRyaXgsIHNjYWxlTXVsdGlwbGllcnMoZmFjdG9yKSwgJ3RyYW5zbGF0ZSgtNTAlLC01MCUpJyk7XG59KShmID0+IFsxIC8gZiwgMSAvIGYsIDEgLyBmLCAxLCAtMSAvIGYsIC0xIC8gZiwgLTEgLyBmLCAtMSwgMSAvIGYsIDEgLyBmLCAxIC8gZiwgMSwgMSwgMSwgMSwgMV0pO1xuZnVuY3Rpb24gaXNSZWZPYmplY3QocmVmKSB7XG4gIHJldHVybiByZWYgJiYgdHlwZW9mIHJlZiA9PT0gJ29iamVjdCcgJiYgJ2N1cnJlbnQnIGluIHJlZjtcbn1cbmNvbnN0IEh0bWwgPSAvKiBAX19QVVJFX18gKi9SZWFjdC5mb3J3YXJkUmVmKCh7XG4gIGNoaWxkcmVuLFxuICBlcHMgPSAwLjAwMSxcbiAgc3R5bGUsXG4gIGNsYXNzTmFtZSxcbiAgcHJlcGVuZCxcbiAgY2VudGVyLFxuICBmdWxsc2NyZWVuLFxuICBwb3J0YWwsXG4gIGRpc3RhbmNlRmFjdG9yLFxuICBzcHJpdGUgPSBmYWxzZSxcbiAgdHJhbnNmb3JtID0gZmFsc2UsXG4gIG9jY2x1ZGUsXG4gIG9uT2NjbHVkZSxcbiAgY2FzdFNoYWRvdyxcbiAgcmVjZWl2ZVNoYWRvdyxcbiAgbWF0ZXJpYWwsXG4gIGdlb21ldHJ5LFxuICB6SW5kZXhSYW5nZSA9IFsxNjc3NzI3MSwgMF0sXG4gIGNhbGN1bGF0ZVBvc2l0aW9uID0gZGVmYXVsdENhbGN1bGF0ZVBvc2l0aW9uLFxuICBhcyA9ICdkaXYnLFxuICB3cmFwcGVyQ2xhc3MsXG4gIHBvaW50ZXJFdmVudHMgPSAnYXV0bycsXG4gIC4uLnByb3BzXG59LCByZWYpID0+IHtcbiAgY29uc3Qge1xuICAgIGdsLFxuICAgIGNhbWVyYSxcbiAgICBzY2VuZSxcbiAgICBzaXplLFxuICAgIHJheWNhc3RlcixcbiAgICBldmVudHMsXG4gICAgdmlld3BvcnRcbiAgfSA9IHVzZVRocmVlKCk7XG4gIGNvbnN0IFtlbF0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGFzKSk7XG4gIGNvbnN0IHJvb3QgPSBSZWFjdC51c2VSZWYoKTtcbiAgY29uc3QgZ3JvdXAgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IG9sZFpvb20gPSBSZWFjdC51c2VSZWYoMCk7XG4gIGNvbnN0IG9sZFBvc2l0aW9uID0gUmVhY3QudXNlUmVmKFswLCAwXSk7XG4gIGNvbnN0IHRyYW5zZm9ybU91dGVyUmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCB0cmFuc2Zvcm1Jbm5lclJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgLy8gQXBwZW5kIHRvIHRoZSBjb25uZWN0ZWQgZWxlbWVudCwgd2hpY2ggbWFrZXMgSFRNTCB3b3JrIHdpdGggdmlld3NcbiAgY29uc3QgdGFyZ2V0ID0gKHBvcnRhbCA9PSBudWxsID8gdm9pZCAwIDogcG9ydGFsLmN1cnJlbnQpIHx8IGV2ZW50cy5jb25uZWN0ZWQgfHwgZ2wuZG9tRWxlbWVudC5wYXJlbnROb2RlO1xuICBjb25zdCBvY2NsdXNpb25NZXNoUmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCBpc01lc2hTaXplU2V0ID0gUmVhY3QudXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgaXNSYXlDYXN0T2NjbHVzaW9uID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIG9jY2x1ZGUgJiYgb2NjbHVkZSAhPT0gJ2JsZW5kaW5nJyB8fCBBcnJheS5pc0FycmF5KG9jY2x1ZGUpICYmIG9jY2x1ZGUubGVuZ3RoICYmIGlzUmVmT2JqZWN0KG9jY2x1ZGVbMF0pO1xuICB9LCBbb2NjbHVkZV0pO1xuICBSZWFjdC51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsID0gZ2wuZG9tRWxlbWVudDtcbiAgICBpZiAob2NjbHVkZSAmJiBvY2NsdWRlID09PSAnYmxlbmRpbmcnKSB7XG4gICAgICBlbC5zdHlsZS56SW5kZXggPSBgJHtNYXRoLmZsb29yKHpJbmRleFJhbmdlWzBdIC8gMil9YDtcbiAgICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgIGVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnN0eWxlLnpJbmRleCA9IG51bGw7XG4gICAgICBlbC5zdHlsZS5wb3NpdGlvbiA9IG51bGw7XG4gICAgICBlbC5zdHlsZS5wb2ludGVyRXZlbnRzID0gbnVsbDtcbiAgICB9XG4gIH0sIFtvY2NsdWRlXSk7XG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdyb3VwLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRSb290ID0gcm9vdC5jdXJyZW50ID0gUmVhY3RET00uY3JlYXRlUm9vdChlbCk7XG4gICAgICBzY2VuZS51cGRhdGVNYXRyaXhXb3JsZCgpO1xuICAgICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICBlbC5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtwb2ludGVyLWV2ZW50czpub25lO292ZXJmbG93OmhpZGRlbjtgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmVjID0gY2FsY3VsYXRlUG9zaXRpb24oZ3JvdXAuY3VycmVudCwgY2FtZXJhLCBzaXplKTtcbiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IGBwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKCR7dmVjWzBdfXB4LCR7dmVjWzFdfXB4LDApO3RyYW5zZm9ybS1vcmlnaW46MCAwO2A7XG4gICAgICB9XG4gICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGlmIChwcmVwZW5kKSB0YXJnZXQucHJlcGVuZChlbCk7ZWxzZSB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0LnJlbW92ZUNoaWxkKGVsKTtcbiAgICAgICAgY3VycmVudFJvb3QudW5tb3VudCgpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFt0YXJnZXQsIHRyYW5zZm9ybV0pO1xuICBSZWFjdC51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh3cmFwcGVyQ2xhc3MpIGVsLmNsYXNzTmFtZSA9IHdyYXBwZXJDbGFzcztcbiAgfSwgW3dyYXBwZXJDbGFzc10pO1xuICBjb25zdCBzdHlsZXMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB3aWR0aDogc2l6ZS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBzaXplLmhlaWdodCxcbiAgICAgICAgdHJhbnNmb3JtU3R5bGU6ICdwcmVzZXJ2ZS0zZCcsXG4gICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRyYW5zZm9ybTogY2VudGVyID8gJ3RyYW5zbGF0ZTNkKC01MCUsLTUwJSwwKScgOiAnbm9uZScsXG4gICAgICAgIC4uLihmdWxsc2NyZWVuICYmIHtcbiAgICAgICAgICB0b3A6IC1zaXplLmhlaWdodCAvIDIsXG4gICAgICAgICAgbGVmdDogLXNpemUud2lkdGggLyAyLFxuICAgICAgICAgIHdpZHRoOiBzaXplLndpZHRoLFxuICAgICAgICAgIGhlaWdodDogc2l6ZS5oZWlnaHRcbiAgICAgICAgfSksXG4gICAgICAgIC4uLnN0eWxlXG4gICAgICB9O1xuICAgIH1cbiAgfSwgW3N0eWxlLCBjZW50ZXIsIGZ1bGxzY3JlZW4sIHNpemUsIHRyYW5zZm9ybV0pO1xuICBjb25zdCB0cmFuc2Zvcm1Jbm5lclN0eWxlcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gKHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBwb2ludGVyRXZlbnRzXG4gIH0pLCBbcG9pbnRlckV2ZW50c10pO1xuICBSZWFjdC51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlzTWVzaFNpemVTZXQuY3VycmVudCA9IGZhbHNlO1xuICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgIHZhciBfcm9vdCRjdXJyZW50O1xuICAgICAgKF9yb290JGN1cnJlbnQgPSByb290LmN1cnJlbnQpID09IG51bGwgfHwgX3Jvb3QkY3VycmVudC5yZW5kZXIoIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgcmVmOiB0cmFuc2Zvcm1PdXRlclJlZixcbiAgICAgICAgc3R5bGU6IHN0eWxlc1xuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICByZWY6IHRyYW5zZm9ybUlubmVyUmVmLFxuICAgICAgICBzdHlsZTogdHJhbnNmb3JtSW5uZXJTdHlsZXNcbiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgcmVmOiByZWYsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICAgICAgfSkpKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfcm9vdCRjdXJyZW50MjtcbiAgICAgIChfcm9vdCRjdXJyZW50MiA9IHJvb3QuY3VycmVudCkgPT0gbnVsbCB8fCBfcm9vdCRjdXJyZW50Mi5yZW5kZXIoIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgcmVmOiByZWYsXG4gICAgICAgIHN0eWxlOiBzdHlsZXMsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW5cbiAgICAgIH0pKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCB2aXNpYmxlID0gUmVhY3QudXNlUmVmKHRydWUpO1xuICB1c2VGcmFtZShnbCA9PiB7XG4gICAgaWYgKGdyb3VwLmN1cnJlbnQpIHtcbiAgICAgIGNhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO1xuICAgICAgZ3JvdXAuY3VycmVudC51cGRhdGVXb3JsZE1hdHJpeCh0cnVlLCBmYWxzZSk7XG4gICAgICBjb25zdCB2ZWMgPSB0cmFuc2Zvcm0gPyBvbGRQb3NpdGlvbi5jdXJyZW50IDogY2FsY3VsYXRlUG9zaXRpb24oZ3JvdXAuY3VycmVudCwgY2FtZXJhLCBzaXplKTtcbiAgICAgIGlmICh0cmFuc2Zvcm0gfHwgTWF0aC5hYnMob2xkWm9vbS5jdXJyZW50IC0gY2FtZXJhLnpvb20pID4gZXBzIHx8IE1hdGguYWJzKG9sZFBvc2l0aW9uLmN1cnJlbnRbMF0gLSB2ZWNbMF0pID4gZXBzIHx8IE1hdGguYWJzKG9sZFBvc2l0aW9uLmN1cnJlbnRbMV0gLSB2ZWNbMV0pID4gZXBzKSB7XG4gICAgICAgIGNvbnN0IGlzQmVoaW5kQ2FtZXJhID0gaXNPYmplY3RCZWhpbmRDYW1lcmEoZ3JvdXAuY3VycmVudCwgY2FtZXJhKTtcbiAgICAgICAgbGV0IHJheXRyYWNlVGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgIGlmIChpc1JheUNhc3RPY2NsdXNpb24pIHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvY2NsdWRlKSkge1xuICAgICAgICAgICAgcmF5dHJhY2VUYXJnZXQgPSBvY2NsdWRlLm1hcChpdGVtID0+IGl0ZW0uY3VycmVudCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvY2NsdWRlICE9PSAnYmxlbmRpbmcnKSB7XG4gICAgICAgICAgICByYXl0cmFjZVRhcmdldCA9IFtzY2VuZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzbHlWaXNpYmxlID0gdmlzaWJsZS5jdXJyZW50O1xuICAgICAgICBpZiAocmF5dHJhY2VUYXJnZXQpIHtcbiAgICAgICAgICBjb25zdCBpc3Zpc2libGUgPSBpc09iamVjdFZpc2libGUoZ3JvdXAuY3VycmVudCwgY2FtZXJhLCByYXljYXN0ZXIsIHJheXRyYWNlVGFyZ2V0KTtcbiAgICAgICAgICB2aXNpYmxlLmN1cnJlbnQgPSBpc3Zpc2libGUgJiYgIWlzQmVoaW5kQ2FtZXJhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpc2libGUuY3VycmVudCA9ICFpc0JlaGluZENhbWVyYTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldmlvdXNseVZpc2libGUgIT09IHZpc2libGUuY3VycmVudCkge1xuICAgICAgICAgIGlmIChvbk9jY2x1ZGUpIG9uT2NjbHVkZSghdmlzaWJsZS5jdXJyZW50KTtlbHNlIGVsLnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlLmN1cnJlbnQgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhbGZSYW5nZSA9IE1hdGguZmxvb3IoekluZGV4UmFuZ2VbMF0gLyAyKTtcbiAgICAgICAgY29uc3QgelJhbmdlID0gb2NjbHVkZSA/IGlzUmF5Q2FzdE9jY2x1c2lvbiAvL1xuICAgICAgICA/IFt6SW5kZXhSYW5nZVswXSwgaGFsZlJhbmdlXSA6IFtoYWxmUmFuZ2UgLSAxLCAwXSA6IHpJbmRleFJhbmdlO1xuICAgICAgICBlbC5zdHlsZS56SW5kZXggPSBgJHtvYmplY3RaSW5kZXgoZ3JvdXAuY3VycmVudCwgY2FtZXJhLCB6UmFuZ2UpfWA7XG4gICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICBjb25zdCBbd2lkdGhIYWxmLCBoZWlnaHRIYWxmXSA9IFtzaXplLndpZHRoIC8gMiwgc2l6ZS5oZWlnaHQgLyAyXTtcbiAgICAgICAgICBjb25zdCBmb3YgPSBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1s1XSAqIGhlaWdodEhhbGY7XG4gICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaXNPcnRob2dyYXBoaWNDYW1lcmEsXG4gICAgICAgICAgICB0b3AsXG4gICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgYm90dG9tLFxuICAgICAgICAgICAgcmlnaHRcbiAgICAgICAgICB9ID0gY2FtZXJhO1xuICAgICAgICAgIGNvbnN0IGNhbWVyYU1hdHJpeCA9IGdldENhbWVyYUNTU01hdHJpeChjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTtcbiAgICAgICAgICBjb25zdCBjYW1lcmFUcmFuc2Zvcm0gPSBpc09ydGhvZ3JhcGhpY0NhbWVyYSA/IGBzY2FsZSgke2Zvdn0pdHJhbnNsYXRlKCR7ZXBzaWxvbigtKHJpZ2h0ICsgbGVmdCkgLyAyKX1weCwke2Vwc2lsb24oKHRvcCArIGJvdHRvbSkgLyAyKX1weClgIDogYHRyYW5zbGF0ZVooJHtmb3Z9cHgpYDtcbiAgICAgICAgICBsZXQgbWF0cml4ID0gZ3JvdXAuY3VycmVudC5tYXRyaXhXb3JsZDtcbiAgICAgICAgICBpZiAoc3ByaXRlKSB7XG4gICAgICAgICAgICBtYXRyaXggPSBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlLmNsb25lKCkudHJhbnNwb3NlKCkuY29weVBvc2l0aW9uKG1hdHJpeCkuc2NhbGUoZ3JvdXAuY3VycmVudC5zY2FsZSk7XG4gICAgICAgICAgICBtYXRyaXguZWxlbWVudHNbM10gPSBtYXRyaXguZWxlbWVudHNbN10gPSBtYXRyaXguZWxlbWVudHNbMTFdID0gMDtcbiAgICAgICAgICAgIG1hdHJpeC5lbGVtZW50c1sxNV0gPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IHNpemUud2lkdGggKyAncHgnO1xuICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHNpemUuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICBlbC5zdHlsZS5wZXJzcGVjdGl2ZSA9IGlzT3J0aG9ncmFwaGljQ2FtZXJhID8gJycgOiBgJHtmb3Z9cHhgO1xuICAgICAgICAgIGlmICh0cmFuc2Zvcm1PdXRlclJlZi5jdXJyZW50ICYmIHRyYW5zZm9ybUlubmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybU91dGVyUmVmLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gYCR7Y2FtZXJhVHJhbnNmb3JtfSR7Y2FtZXJhTWF0cml4fXRyYW5zbGF0ZSgke3dpZHRoSGFsZn1weCwke2hlaWdodEhhbGZ9cHgpYDtcbiAgICAgICAgICAgIHRyYW5zZm9ybUlubmVyUmVmLmN1cnJlbnQuc3R5bGUudHJhbnNmb3JtID0gZ2V0T2JqZWN0Q1NTTWF0cml4KG1hdHJpeCwgMSAvICgoZGlzdGFuY2VGYWN0b3IgfHwgMTApIC8gNDAwKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNjYWxlID0gZGlzdGFuY2VGYWN0b3IgPT09IHVuZGVmaW5lZCA/IDEgOiBvYmplY3RTY2FsZShncm91cC5jdXJyZW50LCBjYW1lcmEpICogZGlzdGFuY2VGYWN0b3I7XG4gICAgICAgICAgZWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dmVjWzBdfXB4LCR7dmVjWzFdfXB4LDApIHNjYWxlKCR7c2NhbGV9KWA7XG4gICAgICAgIH1cbiAgICAgICAgb2xkUG9zaXRpb24uY3VycmVudCA9IHZlYztcbiAgICAgICAgb2xkWm9vbS5jdXJyZW50ID0gY2FtZXJhLnpvb207XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXNSYXlDYXN0T2NjbHVzaW9uICYmIG9jY2x1c2lvbk1lc2hSZWYuY3VycmVudCAmJiAhaXNNZXNoU2l6ZVNldC5jdXJyZW50KSB7XG4gICAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1PdXRlclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgY29uc3QgZWwgPSB0cmFuc2Zvcm1PdXRlclJlZi5jdXJyZW50LmNoaWxkcmVuWzBdO1xuICAgICAgICAgIGlmIChlbCAhPSBudWxsICYmIGVsLmNsaWVudFdpZHRoICYmIGVsICE9IG51bGwgJiYgZWwuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIGlzT3J0aG9ncmFwaGljQ2FtZXJhXG4gICAgICAgICAgICB9ID0gY2FtZXJhO1xuICAgICAgICAgICAgaWYgKGlzT3J0aG9ncmFwaGljQ2FtZXJhIHx8IGdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgIGlmIChwcm9wcy5zY2FsZSkge1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9wcy5zY2FsZSkpIHtcbiAgICAgICAgICAgICAgICAgIG9jY2x1c2lvbk1lc2hSZWYuY3VycmVudC5zY2FsZS5zZXRTY2FsYXIoMSAvIHByb3BzLnNjYWxlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BzLnNjYWxlIGluc3RhbmNlb2YgVmVjdG9yMykge1xuICAgICAgICAgICAgICAgICAgb2NjbHVzaW9uTWVzaFJlZi5jdXJyZW50LnNjYWxlLmNvcHkocHJvcHMuc2NhbGUuY2xvbmUoKS5kaXZpZGVTY2FsYXIoMSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvY2NsdXNpb25NZXNoUmVmLmN1cnJlbnQuc2NhbGUuc2V0KDEgLyBwcm9wcy5zY2FsZVswXSwgMSAvIHByb3BzLnNjYWxlWzFdLCAxIC8gcHJvcHMuc2NhbGVbMl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSAoZGlzdGFuY2VGYWN0b3IgfHwgMTApIC8gNDAwO1xuICAgICAgICAgICAgICBjb25zdCB3ID0gZWwuY2xpZW50V2lkdGggKiByYXRpbztcbiAgICAgICAgICAgICAgY29uc3QgaCA9IGVsLmNsaWVudEhlaWdodCAqIHJhdGlvO1xuICAgICAgICAgICAgICBvY2NsdXNpb25NZXNoUmVmLmN1cnJlbnQuc2NhbGUuc2V0KHcsIGgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNNZXNoU2l6ZVNldC5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVsZSA9IGVsLmNoaWxkcmVuWzBdO1xuICAgICAgICBpZiAoZWxlICE9IG51bGwgJiYgZWxlLmNsaWVudFdpZHRoICYmIGVsZSAhPSBudWxsICYmIGVsZS5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgICBjb25zdCByYXRpbyA9IDEgLyB2aWV3cG9ydC5mYWN0b3I7XG4gICAgICAgICAgY29uc3QgdyA9IGVsZS5jbGllbnRXaWR0aCAqIHJhdGlvO1xuICAgICAgICAgIGNvbnN0IGggPSBlbGUuY2xpZW50SGVpZ2h0ICogcmF0aW87XG4gICAgICAgICAgb2NjbHVzaW9uTWVzaFJlZi5jdXJyZW50LnNjYWxlLnNldCh3LCBoLCAxKTtcbiAgICAgICAgICBpc01lc2hTaXplU2V0LmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9jY2x1c2lvbk1lc2hSZWYuY3VycmVudC5sb29rQXQoZ2wuY2FtZXJhLnBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBjb25zdCBzaGFkZXJzID0gUmVhY3QudXNlTWVtbygoKSA9PiAoe1xuICAgIHZlcnRleFNoYWRlcjogIXRyYW5zZm9ybSA/IC8qIGdsc2wgKi9gXG4gICAgICAgICAgLypcbiAgICAgICAgICAgIFRoaXMgc2hhZGVyIGlzIGZyb20gdGhlIFRIUkVFJ3MgU3ByaXRlTWF0ZXJpYWwuXG4gICAgICAgICAgICBXZSBuZWVkIHRvIHR1cm4gdGhlIGJhY2tpbmcgcGxhbmUgaW50byBhIFNwcml0ZVxuICAgICAgICAgICAgKG1ha2UgaXQgYWx3YXlzIGZhY2UgdGhlIGNhbWVyYSkgaWYgXCJ0cmFuc2Zyb21cIiBcbiAgICAgICAgICAgIGlzIGZhbHNlLiBcbiAgICAgICAgICAqL1xuICAgICAgICAgICNpbmNsdWRlIDxjb21tb24+XG5cbiAgICAgICAgICB2b2lkIG1haW4oKSB7XG4gICAgICAgICAgICB2ZWMyIGNlbnRlciA9IHZlYzIoMC4sIDEuKTtcbiAgICAgICAgICAgIGZsb2F0IHJvdGF0aW9uID0gMC4wO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHNvbWV3aGF0IGFyYml0cmFyeSwgYnV0IGl0IHNlZW1zIHRvIHdvcmsgd2VsbFxuICAgICAgICAgICAgLy8gTmVlZCB0byBmaWd1cmUgb3V0IGhvdyB0byBkZXJpdmUgdGhpcyBkeW5hbWljYWxseSBpZiBpdCBldmVuIG1hdHRlcnNcbiAgICAgICAgICAgIGZsb2F0IHNpemUgPSAwLjAzO1xuXG4gICAgICAgICAgICB2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTtcbiAgICAgICAgICAgIHZlYzIgc2NhbGU7XG4gICAgICAgICAgICBzY2FsZS54ID0gbGVuZ3RoKCB2ZWMzKCBtb2RlbE1hdHJpeFsgMCBdLngsIG1vZGVsTWF0cml4WyAwIF0ueSwgbW9kZWxNYXRyaXhbIDAgXS56ICkgKTtcbiAgICAgICAgICAgIHNjYWxlLnkgPSBsZW5ndGgoIHZlYzMoIG1vZGVsTWF0cml4WyAxIF0ueCwgbW9kZWxNYXRyaXhbIDEgXS55LCBtb2RlbE1hdHJpeFsgMSBdLnogKSApO1xuXG4gICAgICAgICAgICBib29sIGlzUGVyc3BlY3RpdmUgPSBpc1BlcnNwZWN0aXZlTWF0cml4KCBwcm9qZWN0aW9uTWF0cml4ICk7XG4gICAgICAgICAgICBpZiAoIGlzUGVyc3BlY3RpdmUgKSBzY2FsZSAqPSAtIG12UG9zaXRpb24uejtcblxuICAgICAgICAgICAgdmVjMiBhbGlnbmVkUG9zaXRpb24gPSAoIHBvc2l0aW9uLnh5IC0gKCBjZW50ZXIgLSB2ZWMyKCAwLjUgKSApICkgKiBzY2FsZSAqIHNpemU7XG4gICAgICAgICAgICB2ZWMyIHJvdGF0ZWRQb3NpdGlvbjtcbiAgICAgICAgICAgIHJvdGF0ZWRQb3NpdGlvbi54ID0gY29zKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggLSBzaW4oIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcbiAgICAgICAgICAgIHJvdGF0ZWRQb3NpdGlvbi55ID0gc2luKCByb3RhdGlvbiApICogYWxpZ25lZFBvc2l0aW9uLnggKyBjb3MoIHJvdGF0aW9uICkgKiBhbGlnbmVkUG9zaXRpb24ueTtcbiAgICAgICAgICAgIG12UG9zaXRpb24ueHkgKz0gcm90YXRlZFBvc2l0aW9uO1xuXG4gICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xuICAgICAgICAgIH1cbiAgICAgIGAgOiB1bmRlZmluZWQsXG4gICAgZnJhZ21lbnRTaGFkZXI6IC8qIGdsc2wgKi9gXG4gICAgICAgIHZvaWQgbWFpbigpIHtcbiAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCwgMC4wLCAwLjAsIDAuMCk7XG4gICAgICAgIH1cbiAgICAgIGBcbiAgfSksIFt0cmFuc2Zvcm1dKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZ3JvdXBcIiwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgcmVmOiBncm91cFxuICB9KSwgb2NjbHVkZSAmJiAhaXNSYXlDYXN0T2NjbHVzaW9uICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibWVzaFwiLCB7XG4gICAgY2FzdFNoYWRvdzogY2FzdFNoYWRvdyxcbiAgICByZWNlaXZlU2hhZG93OiByZWNlaXZlU2hhZG93LFxuICAgIHJlZjogb2NjbHVzaW9uTWVzaFJlZlxuICB9LCBnZW9tZXRyeSB8fCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBsYW5lR2VvbWV0cnlcIiwgbnVsbCksIG1hdGVyaWFsIHx8IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic2hhZGVyTWF0ZXJpYWxcIiwge1xuICAgIHNpZGU6IERvdWJsZVNpZGUsXG4gICAgdmVydGV4U2hhZGVyOiBzaGFkZXJzLnZlcnRleFNoYWRlcixcbiAgICBmcmFnbWVudFNoYWRlcjogc2hhZGVycy5mcmFnbWVudFNoYWRlclxuICB9KSkpO1xufSk7XG5cbmV4cG9ydCB7IEh0bWwgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@react-three+drei@9.88.13_@react-three+fiber@8.15.11_@types+three@0.158.0_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/web/Html.js\n");

/***/ })

};
;